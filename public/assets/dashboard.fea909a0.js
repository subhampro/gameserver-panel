(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{413:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(28),c=a(282),o=a(1),l=a(253),s=a(53),m=a(27),d=a(17),p=a(175),u=a(177),g=a(24),b=a(34),y=a.n(b);const w=(e,t)=>t>0&&e/(1024*t*1024)>=.9,f=Object(n.memo)(Object(o.c)(s.a).withConfig({displayName:"ServerRow__Icon",componentId:"sc-1ibsw91-0"})(["",";"],(e=>e.$alarm?{"--tw-text-opacity":"1",color:"rgba(248, 113, 113, var(--tw-text-opacity))"}:{"--tw-text-opacity":"1",color:"rgba(115, 115, 115, var(--tw-text-opacity))"})),y.a),v=o.c.p.withConfig({displayName:"ServerRow__IconDescription",componentId:"sc-1ibsw91-1"})(["",";",";"],{fontSize:"0.875rem",lineHeight:"1.25rem",marginLeft:"0.5rem"},(e=>e.$alarm?{"--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))"}:{"--tw-text-opacity":"1",color:"rgba(163, 163, 163, var(--tw-text-opacity))"})),h=Object(o.c)(u.a).withConfig({displayName:"ServerRow__StatusIndicatorBox",componentId:"sc-1ibsw91-2"})(["",";& .status-bar{",";height:calc(100% - 0.5rem);",";}&:hover .status-bar{",";}"],{display:"grid",gridTemplateColumns:"repeat(12, minmax(0, 1fr))",gap:"1rem",position:"relative"},{width:"0.5rem","--tw-bg-opacity":"1",backgroundColor:"rgba(239, 68, 68, var(--tw-bg-opacity))",position:"absolute",right:"0px",zIndex:"20",borderRadius:"9999px",margin:"0.25rem",opacity:"0.5",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms"},(e=>{let{$status:t}=e;return t&&"offline"!==t?"running"===t?{"--tw-bg-opacity":"1",backgroundColor:"rgba(16, 185, 129, var(--tw-bg-opacity))"}:{"--tw-bg-opacity":"1",backgroundColor:"rgba(245, 158, 11, var(--tw-bg-opacity))"}:{"--tw-bg-opacity":"1",backgroundColor:"rgba(239, 68, 68, var(--tw-bg-opacity))"}}),{opacity:"0.75"});var _=Object(o.c)("div").withConfig({displayName:"ServerRow___StyledDiv",componentId:"sc-1ibsw91-3"})({gridColumn:"span 12 / span 12",display:"flex",alignItems:"center","@media (min-width: 640px)":{gridColumn:"span 5 / span 5"},"@media (min-width: 1024px)":{gridColumn:"span 6 / span 6"}}),S=Object(o.c)("p").withConfig({displayName:"ServerRow___StyledP",componentId:"sc-1ibsw91-4"})({fontSize:"1.125rem",lineHeight:"1.75rem",overflowWrap:"break-word"}),x=Object(o.c)("p").withConfig({displayName:"ServerRow___StyledP2",componentId:"sc-1ibsw91-5"})({fontSize:"0.875rem",lineHeight:"1.25rem","--tw-text-opacity":"1",color:"rgba(212, 212, 212, var(--tw-text-opacity))",overflowWrap:"break-word",overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"2"}),E=Object(o.c)("div").withConfig({displayName:"ServerRow___StyledDiv2",componentId:"sc-1ibsw91-6"})({flex:"1 1 0%",marginLeft:"1rem",display:"none","@media (min-width: 1024px)":{gridColumn:"span 2 / span 2",display:"block"}}),j=Object(o.c)("div").withConfig({displayName:"ServerRow___StyledDiv3",componentId:"sc-1ibsw91-7"})({display:"flex",justifyContent:"center"}),C=Object(o.c)(s.a).withConfig({displayName:"ServerRow___StyledFontAwesomeIcon",componentId:"sc-1ibsw91-8"})({"--tw-text-opacity":"1",color:"rgba(115, 115, 115, var(--tw-text-opacity))"}),O=Object(o.c)("p").withConfig({displayName:"ServerRow___StyledP3",componentId:"sc-1ibsw91-9"})({fontSize:"0.875rem",lineHeight:"1.25rem","--tw-text-opacity":"1",color:"rgba(163, 163, 163, var(--tw-text-opacity))",marginLeft:"0.5rem"}),I=Object(o.c)("div").withConfig({displayName:"ServerRow___StyledDiv4",componentId:"sc-1ibsw91-10"})({gridColumn:"span 7 / span 7",display:"none",alignItems:"baseline",justifyContent:"center","@media (min-width: 640px)":{display:"flex"},"@media (min-width: 1024px)":{gridColumn:"span 4 / span 4"}}),k=Object(o.c)("div").withConfig({displayName:"ServerRow___StyledDiv5",componentId:"sc-1ibsw91-11"})({flex:"1 1 0%",textAlign:"center"}),N=Object(o.c)("span").withConfig({displayName:"ServerRow___StyledSpan",componentId:"sc-1ibsw91-12"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(239, 68, 68, var(--tw-bg-opacity))",borderRadius:"0.25rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",paddingTop:"0.25rem",paddingBottom:"0.25rem","--tw-text-opacity":"1",color:"rgba(254, 226, 226, var(--tw-text-opacity))",fontSize:"0.75rem",lineHeight:"1rem"}),R=Object(o.c)("div").withConfig({displayName:"ServerRow___StyledDiv6",componentId:"sc-1ibsw91-13"})({flex:"1 1 0%",textAlign:"center"}),D=Object(o.c)("span").withConfig({displayName:"ServerRow___StyledSpan2",componentId:"sc-1ibsw91-14"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(115, 115, 115, var(--tw-bg-opacity))",borderRadius:"0.25rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",paddingTop:"0.25rem",paddingBottom:"0.25rem","--tw-text-opacity":"1",color:"rgba(245, 245, 245, var(--tw-text-opacity))",fontSize:"0.75rem",lineHeight:"1rem"}),P=Object(o.c)("div").withConfig({displayName:"ServerRow___StyledDiv7",componentId:"sc-1ibsw91-15"})({flex:"1 1 0%",marginLeft:"1rem",display:"none","@media (min-width: 640px)":{display:"block"}}),z=Object(o.c)("div").withConfig({displayName:"ServerRow___StyledDiv8",componentId:"sc-1ibsw91-16"})({display:"flex",justifyContent:"center"}),T=Object(o.c)("p").withConfig({displayName:"ServerRow___StyledP4",componentId:"sc-1ibsw91-17"})({fontSize:"0.75rem",lineHeight:"1rem","--tw-text-opacity":"1",color:"rgba(82, 82, 82, var(--tw-text-opacity))",textAlign:"center",marginTop:"0.25rem"}),B=Object(o.c)("div").withConfig({displayName:"ServerRow___StyledDiv9",componentId:"sc-1ibsw91-18"})({flex:"1 1 0%",marginLeft:"1rem",display:"none","@media (min-width: 640px)":{display:"block"}}),U=Object(o.c)("div").withConfig({displayName:"ServerRow___StyledDiv10",componentId:"sc-1ibsw91-19"})({display:"flex",justifyContent:"center"}),H=Object(o.c)("p").withConfig({displayName:"ServerRow___StyledP5",componentId:"sc-1ibsw91-20"})({fontSize:"0.75rem",lineHeight:"1rem","--tw-text-opacity":"1",color:"rgba(82, 82, 82, var(--tw-text-opacity))",textAlign:"center",marginTop:"0.25rem"}),$=Object(o.c)("div").withConfig({displayName:"ServerRow___StyledDiv11",componentId:"sc-1ibsw91-21"})({flex:"1 1 0%",marginLeft:"1rem",display:"none","@media (min-width: 640px)":{display:"block"}}),A=Object(o.c)("div").withConfig({displayName:"ServerRow___StyledDiv12",componentId:"sc-1ibsw91-22"})({display:"flex",justifyContent:"center"}),L=Object(o.c)("p").withConfig({displayName:"ServerRow___StyledP6",componentId:"sc-1ibsw91-23"})({fontSize:"0.75rem",lineHeight:"1rem","--tw-text-opacity":"1",color:"rgba(82, 82, 82, var(--tw-text-opacity))",textAlign:"center",marginTop:"0.25rem"}),F=a(57),W=a(153),J=a(2),K=a(255),q=a(204),G=a(174),M=a(256),Q=()=>{const{search:e}=Object(i.g)(),t=Number(new URLSearchParams(e).get("page")||"1"),[a,c]=Object(n.useState)(!isNaN(t)&&t>0?t:1),{clearFlashes:o,clearAndAddHttpError:s}=Object(W.a)(),m=Object(J.useStoreState)((e=>e.user.data.uuid)),d=Object(J.useStoreState)((e=>e.user.data.rootAdmin)),[p,u]=Object(K.a)("".concat(m,":show_all_servers"),!1),{data:b,error:y}=Object(G.a)(["/api/client/servers",p&&d,a],(()=>Object(l.a)({page:a,type:p&&d?"admin":void 0})));return Object(n.useEffect)((()=>{b&&b.pagination.currentPage>1&&!b.items.length&&c(1)}),[null==b?void 0:b.pagination.currentPage]),Object(n.useEffect)((()=>{window.history.replaceState(null,document.title,"/".concat(a<=1?"":"?page=".concat(a)))}),[a]),Object(n.useEffect)((()=>{y&&s({key:"dashboard",error:y}),y||o("dashboard")}),[y]),r.a.createElement(F.a,{className:"content-dashboard",title:"Dashboard",showFlashKey:"dashboard"},d&&r.a.createElement(V,null,r.a.createElement(X,null,p?"Showing others' servers":"Showing your servers"),r.a.createElement(q.a,{name:"show_all_servers",defaultChecked:p,onChange:()=>u((e=>!e))})),b?r.a.createElement(M.a,{data:b,onPageSelect:c},(e=>{let{items:t}=e;return t.length>0?t.map(((e,t)=>r.a.createElement(Y,{key:e.uuid,server:e,$_css:t>0?{marginTop:"0.5rem"}:void 0}))):r.a.createElement(Z,null,p?"There are no other servers to display.":"There are no servers associated with your account.")})):r.a.createElement(g.a,{centered:!0,size:"large"}))},V=Object(o.c)("div").withConfig({displayName:"DashboardContainer___StyledDiv",componentId:"sc-1topkxf-0"})({marginBottom:"0.5rem",display:"flex",justifyContent:"flex-end",alignItems:"center"}),X=Object(o.c)("p").withConfig({displayName:"DashboardContainer___StyledP",componentId:"sc-1topkxf-1"})({textTransform:"uppercase",fontSize:"0.75rem",lineHeight:"1rem","--tw-text-opacity":"1",color:"rgba(163, 163, 163, var(--tw-text-opacity))",marginRight:"0.5rem"}),Y=Object(o.c)((e=>{let{server:t,className:a}=e;const c=Object(n.useRef)(null),[o,l]=Object(n.useState)("suspended"===t.status),[u,b]=Object(n.useState)(null),y=()=>(e=>new Promise(((t,a)=>{d.a.get("/api/client/servers/".concat(e,"/resources")).then((e=>{let{data:{attributes:a}}=e;return t({status:a.current_state,isSuspended:a.is_suspended,memoryUsageInBytes:a.resources.memory_bytes,cpuUsagePercent:a.resources.cpu_absolute,diskUsageInBytes:a.resources.disk_bytes,networkRxInBytes:a.resources.network_rx_bytes,networkTxInBytes:a.resources.network_tx_bytes,uptime:a.resources.uptime})})).catch(a)})))(t.uuid).then((e=>b(e))).catch((e=>console.error(e)));Object(n.useEffect)((()=>{l((null==u?void 0:u.isSuspended)||"suspended"===t.status)}),[null==u?void 0:u.isSuspended,t.status]),Object(n.useEffect)((()=>{if(!o)return y().then((()=>{c.current=setInterval((()=>y()),3e4)})),()=>{c.current&&clearInterval(c.current)}}),[o]);const F={cpu:!1,memory:!1,disk:!1};u&&(F.cpu=0!==t.limits.cpu&&u.cpuUsagePercent>=.9*t.limits.cpu,F.memory=w(u.memoryUsageInBytes,t.limits.memory),F.disk=0!==t.limits.disk&&w(u.diskUsageInBytes,t.limits.disk));const W=0!==t.limits.disk?Object(p.a)(Object(p.c)(t.limits.disk)):"Unlimited",J=0!==t.limits.memory?Object(p.a)(Object(p.c)(t.limits.memory)):"Unlimited",K=0!==t.limits.cpu?t.limits.cpu+" %":"Unlimited";return r.a.createElement(h,{as:i.a,to:"/server/".concat(t.id),className:a,$status:null==u?void 0:u.status},r.a.createElement(_,null,r.a.createElement("div",{className:"icon mr-4"},r.a.createElement(s.a,{icon:m.P})),r.a.createElement("div",null,r.a.createElement(S,null,t.name),!!t.description&&r.a.createElement(x,null,t.description))),r.a.createElement(E,null,r.a.createElement(j,null,r.a.createElement(C,{icon:m.s}),r.a.createElement(O,null,t.allocations.filter((e=>e.isDefault)).map((e=>r.a.createElement(r.a.Fragment,{key:e.ip+e.port.toString()},e.alias||Object(p.b)(e.ip),":",e.port)))))),r.a.createElement(I,null,!u||o?o?r.a.createElement(k,null,r.a.createElement(N,null,"suspended"===t.status?"Suspended":"Connection Error")):t.isTransferring||t.status?r.a.createElement(R,null,r.a.createElement(D,null,t.isTransferring?"Transferring":"installing"===t.status?"Installing":"restoring_backup"===t.status?"Restoring Backup":"Unavailable")):r.a.createElement(g.a,{size:"small"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(P,null,r.a.createElement(z,null,r.a.createElement(f,{icon:m.I,$alarm:F.cpu}),r.a.createElement(v,{$alarm:F.cpu},u.cpuUsagePercent.toFixed(2)," %")),r.a.createElement(T,null,"of ",K)),r.a.createElement(B,null,r.a.createElement(U,null,r.a.createElement(f,{icon:m.H,$alarm:F.memory}),r.a.createElement(v,{$alarm:F.memory},Object(p.a)(u.memoryUsageInBytes))),r.a.createElement(H,null,"of ",J)),r.a.createElement($,null,r.a.createElement(A,null,r.a.createElement(f,{icon:m.C,$alarm:F.disk}),r.a.createElement(v,{$alarm:F.disk},Object(p.a)(u.diskUsageInBytes))),r.a.createElement(L,null,"of ",W)))),r.a.createElement("div",{className:"status-bar"}))})).withConfig({displayName:"DashboardContainer___StyledServerRow",componentId:"sc-1topkxf-2"})(["",""],(e=>e.$_css)),Z=Object(o.c)("p").withConfig({displayName:"DashboardContainer___StyledP2",componentId:"sc-1topkxf-3"})({textAlign:"center",fontSize:"0.875rem",lineHeight:"1.25rem","--tw-text-opacity":"1",color:"rgba(163, 163, 163, var(--tw-text-opacity))"}),ee=a(56),te=a(257),ae=a(15),ne=a(281),re=a(285);t.default=()=>{const e=Object(ae.h)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,null),e.pathname.startsWith("/account")&&r.a.createElement(re.a,null,ne.a.account.filter((e=>!!e.name)).map((e=>{let{path:t,name:a,exact:n=!1,iconProp:c}=e;return r.a.createElement(i.b,{key:t,to:"/account/".concat(t).replace("//","/"),exact:n},r.a.createElement("div",{className:"icon"},r.a.createElement(s.a,{icon:c})),a)}))),r.a.createElement(te.a,null,r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(g.a,{centered:!0})},r.a.createElement(i.e,{location:e},r.a.createElement(i.c,{path:"/",exact:!0},r.a.createElement(Q,null)),ne.a.account.map((e=>{let{path:t,component:a}=e;return r.a.createElement(i.c,{key:t,path:"/account/".concat(t).replace("//","/"),exact:!0},r.a.createElement(a,null))})),r.a.createElement(i.c,{path:"*"},r.a.createElement(ee.a,null))))))}}}]);